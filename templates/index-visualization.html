<!DOCTYPE html>

{% load static %}
{% block content %}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" />

<script src="https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js"></script>
<link href="https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css" rel="stylesheet" />

<!-- for fixing faviccon.ico error -->
<link rel="shortcut icon" href="#">

<style>
  body {
    margin: 0;
    padding: 0;
  }

  #map {
    position: relative;
    width: 100.0%;
    height: 100.0%;
    left: 0.0%;
    top: 0.0%;
  }
</style>
<script src="https://d3js.org/d3.v7.min.js"></script>

<link rel="stylesheet" type="text/css" href="{% static '/css/legend.css' %}">


<div class="row w-100 h-100">
  <div class="col-md-1 h-100" id="destinationDiv">
    <div id="divToMove">
      <h5><a href="{% url 'network_details' roadnetwork.pk %}">Go Back</a></h5>
      <hr>
      <div class="form-group w-75 mx-auto">
        <label for="zoneSelector" class="sr-only">Zones</label>
        <select id="zoneSelector" class="form-control">
          <option value="none">Zones</option>
          <option value="departures">Departures</option>
          <option value="arrivals">Arrivals</option>
          <option value="averages">Average</option>
        </select>
      </div>

      <div class="form-group w-75 mx-auto">
        <label for="linkSelector" class="sr-only">Links</label>
        <select id="linkSelector" class="form-control" onchange="linkDropDown();">
          <optgroup label="Input">
            <option value="default">Road type</option>
            <option value="lanes">Lanes</option>
            <option value="length">Length</option>
            <option value="speed">Speed</option>
          </optgroup>

          <optgroup label="Ouput">
            <option value="congestion">Congestion</option>
            <option value="speed_output">Speed</option>
            <option value="travel_time">Travel Time</option>
          </optgroup>
        </select>
      </div>
      <hr>
      <div class="form-group w-75 mx-auto">
        <div id="linkLabel" style="height:30px;display:none">
          <label for="legend-links-svg">Legend</label>
        </div>
        <div id="legend-links-container">
          <svg id="legend-links-svg" class="h-100 w-100"></svg>
        </div>
      </div>
    </div>

  </div>

  <div class="col-md-11">
    <div class="#" id="map"></div>
  </div>
</div>

<!---The follow code is for getting a network type. ie abstract or real--->
<!---{{ roadnetwork.simple|json_script:'networktype' }}--->

<script>
  /*const network_type = JSON.parse(document.getElementById('networktype').textContent);*/
  const network_type = {% if roadnetwork.simple %}true {% else %} false {% endif %};
  var data = {{geojson|safe}};
</script>

<script src="{% static '/js/map_maplibre.js' %}"></script>
<script src="{% static '/js/linklegend.js' %}"></script>
<script src="{% static 'js/maplibre_dropdown.js' %}"></script>



{% endblock %}
