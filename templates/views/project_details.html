{% extends 'base.html' %}
{% load static %}

{% block title %} Project {% endblock title %}

{% block content %}


{% block messages %}
{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock %}

<div class="row">
	<div class="col-md-4">
		<div class="card card-body">
			<h5 style="text-align: center;">Project name : {{project.name}}</h5>
			<hr>
			<div class="">
				<a class="btn btn-outline-info  btn-sm btn-block" 
					href="{% url 'update_project' project.pk %}">Update Project</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'create_network' project.pk %}">Create Road Network</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'create_zoneset' project.pk %}">Create Zone set</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'create_od_matrix' project.pk %}">Create OD matrix</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'add_vehicle' project.pk %}">Add Vehicle</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'upload_vehicle' project.pk %}">Upload Vehicles</a>

				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'add_preferences' project.pk %}">Set Preferences</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'upload_preferences' project.pk %}">Upload Preferences</a>

				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'add_population' project.pk %}">Add Population</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'create_network2' project.pk %}">Create Network</a>
				<a class="btn btn-outline-info  btn-sm btn-block"
					href="{% url 'create_population_segment' project.pk %}">Create population segment</a>
			</div>
		</div>
	</div>

	<div class="col-md">
		<div class="card card-body">
			<h5 style="text-align: center;padding: 0px">Owner Information</h5>
			<hr>
			<p style="text-align: center;">Name: {{user.username}}<br>
				Email: {{user.email}} </p>
		</div>
	</div>

	<div class="col-md">
		<div class="card card-body">
			<h5 style="text-align: center;">Total Networks</h5>
			<hr>
			<h1 style="text-align: center;">{{total_roadnetworks}}</h1>
		</div>
	</div>

	<div class="col-md">
		<div class="card card-body">
			<h5 style="text-align: center;"">Total Zone Sets</h5>
			<hr>
			<h1 style=" text-align: center;padding: 0px">{{total_zonesets}}</h1>
		</div>
	</div>

	<div class="col-md">
		<div class="card card-body">
			<h5 style="text-align: center;">Total OD Matrix</h5>
			<hr>
			<h1 style="text-align: center;padding: 0px">{{total_od_matrix}}</h1>
		</div>
	</div>
</div>

<!--{% if tasks %}
<div class="row">
	<h5>// Last Tasks</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th>Start date</th>
						<th>Description</th>
                        <th>Instance</th>
						<th>Status</th>
						<th>Time taken</th>
                        <th>Details</th>
					</tr>
				</thead>

				<tbody>
					{% for task in tasks %}
                    <tr id="row-task-{{ task.id }}">
                        {% include 'views/task.html' %}
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
{% endif %} -->
<div class="row">
	<h5>// Road network </h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Road network</th>
						<th>Abstract network</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Date created</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for roadnetwork in roadnetworks %}
					<tr>
						<td><a class="btn btn-sm btn-success" href="{% url 'network_details' roadnetwork.pk %}">details</a></td>
						<td>{{roadnetwork.name}}</td>
						<td>{{roadnetwork.simple}}</td>
						<td>{{roadnetwork.comment}}</td>
						<td>{{roadnetwork.tags}}</td>
						<td>{{roadnetwork.date_created}}</td>
						<td><a class="btn btn-sm btn-success" href="{% url 'update_network' roadnetwork.pk %}">Update</a></td>
						<td><a class="btn btn-sm btn-success" href="{% url 'delete_network' roadnetwork.pk %}">Remove</a></td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
<br>
<div class="row">
	<h5>// Zone set</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Zone set name</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Date created</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for zoneset in zonesets %}
					<tr>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'zoneset_details' zoneset.pk %}">details</a></td>
						<td>{{zoneset.name}}</td>
						<td>{{zoneset.comment}}</td>
						<td>{{zoneset.tags}}</td>
						<td>{{zoneset.date_created}}</td>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'update_zoneset' zoneset.pk %}">Update</a></td>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'delete_zoneset' zoneset.pk %}">Remove</a></td>
					</tr>
					{% endfor %}

				</tbody>
			</table>
		</div>
	</div>
</div>

<br>
<div class="row">
	<h5>// Origin Destination matrix</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Zone set</th>
						<th>Name</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Date created</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for od_matrix in od_matrix %}
					<tr>
						<td><a class="btn btn-sm btn-success"
						 href="{% url 'od_matrix_details' od_matrix.pk %}">details</a></td>
						<td>{{od_matrix.zone_set}}</td>
						<td>{{od_matrix.name}}</td>
						<td>{{od_matrix.comment}}</td>
						<td>{{od_matrix.tags}}</td>
						<td>{{od_matrix.date_created}}</td>
							<td><a class="btn btn-sm btn-success"
								href="{% url 'update_od_matrix' od_matrix.pk %}">Update</a></td>
							<td><a class="btn btn-sm btn-success"
								href="{% url 'delete_od_matrix' od_matrix.pk %}">Remove</a></td>
					</tr>
					{% endfor %}
				</tbody>

			</table>
		</div>
	</div>
</div>

<br>
<div class="row">
	<h5>// Preferences</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Name</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Created date</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for preference in preferences %}
					<tr>
						<td><a class="btn btn-sm btn-success"
							href="#">details</a></td>
						<td>{{preference.name}}</td>
						<td>{{preference.comment}}</td>
						<td>{{preference.tags}}</td>
						<td>{{preference.date_created}}</td>
						<td><a class="btn btn-sm btn-success"	href="{% url 'update_preferences' preference.pk %}">Update</a></td>
						<td><a class="btn btn-sm btn-success"	href="{% url 'delete_preferences' preference.pk %}">Remove</a></td>
					</tr>
					{% endfor %}
				</tbody>

			</table>
		</div>
	</div>
</div>

<br>
<div class="row">
	<h5>// Population</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Name</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Created date</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for population in populations %}
					<tr>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'population_details' population.pk %}">details</a></td>
						<td>{{population.name}}</td>
						<td>{{population.comment}}</td>
						<td>{{population.tags}}</td>
						<td>{{population.date_created}}</td>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'update_population' population.pk %}">Update</a></td>
						<td><a class="btn btn-sm btn-success"	href="#">Remove</a></td>
					</tr>
					{% endfor %}
				</tbody>

			</table>
		</div>
	</div>
</div>

<br>
<div class="row">
	<h5>// Network</h5>
	<div class="col-md">
		<div class="card card-body">
			<table class="table table-sm table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th></th>
						<th>Network</th>
						<th>Zone set</th>
						<th>Name</th>
						<th>Comment</th>
						<th>Tags</th>
						<th>Created date</th>
						<th>Update</th>
						<th>Remove</th>
					</tr>
				</thead>

				<tbody>
					{% for network in networks %}
					<tr>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'network2_details' network.pk %}">details</a></td>
						<td>{{network.road_network}}</td>
						<td>{{network.zone_set}}</td>
						<td>{{network.name}}</td>
						<td>{{network.comment}}</td>
						<td>{{network.tags}}</td>
						<td>{{network.date_created}}</td>
						<td><a class="btn btn-sm btn-success"
							href="{% url 'update_network2' network.pk %}">Update</a></td>
						<td><a class="btn btn-sm btn-success"	href="#">Remove</a></td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>



<a href="{% url 'home' %}">Back</a>

<script src="{% static '/js/refresh_tag.js' %}"></script>
<script>
    {% for task in tasks %}
    {% if task.status == task.INPROGRESS %}
    refreshTag("{% url 'fetch_task' task.id %}", "#row-task-{{ task.id }}", 1000);
    {% endif %}
    {% endfor %}
</script>

{% endblock %}
